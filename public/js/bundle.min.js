function alerta(e,t,o=""){Swal.fire({icon:t,title:e,text:o,timer:5e3})}function alertaTop(e,t){Swal.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",Swal.stopTimer),e.addEventListener("mouseleave",Swal.resumeTimer)}}).fire({icon:t,title:e})}function eliminarRegistro(){const e=document.querySelectorAll(".botonesEliminar");e&&e.forEach(e=>{e.addEventListener("click",e=>eliminar(e))})}async function eliminar(e){const t=new FormData;t.append("curp",e.target.id);try{const e="/admin/eliminar",o=await fetch(e,{method:"POST",body:t});console.log(o);const a=await o.json();console.log(a),"1"==a.respuestaB&&alertaTop("Se elimino correctamente al derechoHabiente","success")}catch(e){console.log(e)}}let paso=1;function formulario(){const e=document.querySelector("#validar");e&&(e.addEventListener("click",()=>validarForm()),guardarInfoChild(),guardarInfoDerecho(),guardarInfoConyugue(),LimpiarInfo());document.querySelectorAll(".btn").forEach(e=>{e.addEventListener("click",e=>{paso=e.target.dataset.paso,mostrarSeccion()})})}function mostrarSeccion(){const e=document.querySelector("#paso-"+paso),t=document.querySelector(".btnActual"),o=document.querySelector(`[data-paso="${paso}"]`),a=document.querySelector(".mostrar");a&&(a.classList.remove("mostrar"),a.classList.add("ocultar")),e.classList.add("mostrar"),e.classList.remove("ocultar"),t.classList.remove("btnActual"),o.classList.add("btnActual")}async function agregarEstados(){const e=await fetch("/mexico"),t=await e.json(),o=await fetch("/mexico/municipios"),a=await o.json(),n=document.querySelector(".entidad");n&&(t.forEach(e=>{const t=document.createElement("OPTION");t.textContent=e,t.value=e,n.appendChild(t)}),n.addEventListener("change",e=>colcocarMunicipios(a[e.target.value])))}async function colcocarMunicipios(e){const t=document.querySelector(".municipio");t.innerHTML="<option disabled selected>---Seleccione una opción---</option>",e.forEach(e=>{const o=document.createElement("OPTION");o.textContent=e,o.value=e,t.appendChild(o)})}async function agregarEscuelas(){const e=await fetch("/escuelas"),t=await e.json(),o=document.querySelector("#tipoEscuela");o&&o.addEventListener("change",e=>{crearOptionEscuela(t[e.target.value])})}function crearOptionEscuela(e){const t=document.querySelector("#adscripcion");t.innerHTML="<option selected disabled>---Seleccione una escuela---</option>",e.forEach(e=>{const o=document.createElement("OPTION");o.value=e,o.textContent=e,t.appendChild(o)})}function mostrarConyugue(){const e=document.querySelectorAll('input[name="conyugue"]'),t=document.querySelector("[data-paso='3']"),o=document.querySelector("#conyugueInfo"),a=document.querySelector("#validar");e.forEach(e=>{e.addEventListener("click",e=>{if(a.classList.remove("hidden"),"si"===e.target.value)t.classList.remove("hidden"),o.classList.remove("hidden"),mostrarFotoConyugue();else{t.classList.add("hidden"),o.classList.add("hidden");const e=document.querySelector(".formFotos"),a=document.createElement("DIV");a.innerHTML='<button type="submit">Subir fotos</button>',e.appendChild(a)}})})}function mostrarFotoConyugue(){const e=document.querySelector(".formFotos"),t=document.createElement("DIV");t.innerHTML=' <label class="text-gray-600 font-semibold text-lg" for="imgCon">Foto del Conyugue</label>\n  <input class="block w-full " type="file" accept="image/jpeg, image/png" id="imgCon" name="fotoCon">\n  <button type="submit">Subir fotos</button>\n  ',e.appendChild(t)}function mobileMenu(){const e=document.querySelector("#mobile-menu"),t=document.querySelector("#mobile-menu-drop");e.addEventListener("click",()=>{t.classList.toggle("hidden")})}document.addEventListener("DOMContentLoaded",()=>{formulario(),agregarEstados(),agregarEscuelas(),mostrarConyugue(),mobileMenu(),eliminarRegistro()});const childDatos={cendi:"",boleta:"",grupo:"",apellidoPC:"",apellidoMC:"",nombreC:"",fNacimiento:"",edad:"",curpC:"",curpD:""},derechoHabienteDatos={apellidoP:"",apellidoM:"",nombre:"",domicilio:"",municipio:"",entidadFederativa:"",cp:"",tel_F:"",tel_C:"",correo:"",ocupacion:"",curp:"",puesto:"",sueldo:"",nEmpleado:"",adscripcion:"",horarioTrabajo:"",extension:""},conyuDatos={apellidoPCO:"",apellidoMCO:"",nombreCO:"",lugarTrabajo:"",domicilioTrabajo:"",telefono:"",tel_trabajo:"",extensionCO:""},resumen={cendi:"",boleta:"",grupo:"",apellidoPC:"",apellidoMC:"",nombreC:"",fNacimiento:"",edad:"",curpC:"",apellidoP:"",apellidoM:"",nombre:"",domicilio:"",municipio:"",entidadFederativa:"",cp:"",tel_F:"",tel_C:"",correo:"",ocupacion:"",curp:"",puesto:"",sueldo:"",nEmpleado:"",adscripcion:"",horarioTrabajo:"",extension:"",apellidoPCO:"",apellidoMCO:"",nombreCO:"",lugarTrabajo:"",domicilioTrabajo:"",telefono:"",tel_trabajo:"",extensionCO:""};function guardarInfoChild(){const e=document.querySelector("#nombre"),t=document.querySelector("#apellidoM"),o=document.querySelector("#apellidoP"),a=document.querySelector("#fnac"),n=document.querySelector("#edad"),r=document.querySelector("#curp"),c=document.querySelector("#cendi"),l=document.querySelector("#boleta"),d=document.querySelector("#grupo");c.addEventListener("change",e=>{childDatos.cendi=e.target.value,resumen.cendi=e.target.options[c.selectedIndex].innerText}),l.addEventListener("change",e=>{/[PP | PE | 2021][0-9]{8}/.test(e.target.value)?(childDatos.boleta=e.target.value,resumen.boleta=e.target.value):mostrarAlertErrorCampo("Formato invalido de la boleta",e.target.parentElement.parentElement.parentElement)}),d.addEventListener("change",e=>{childDatos.grupo=e.target.value,resumen.grupo=e.target.value}),e.addEventListener("change",e=>{validarTexto(e.target.value)?mostrarAlertErrorCampo("No debe contener números",e.target.parentElement):(childDatos.nombreC=e.target.value,resumen.nombreC=e.target.value)}),t.addEventListener("change",e=>{validarTexto(e.target.value)?mostrarAlertErrorCampo("No debe contener números",e.target.parentElement.parentElement.parentElement):(childDatos.apellidoMC=e.target.value,resumen.apellidoMC=e.target.value)}),o.addEventListener("change",e=>{validarTexto(e.target.value)?mostrarAlertErrorCampo("No debe contener números",e.target.parentElement.parentElement.parentElement):(childDatos.apellidoPC=e.target.value,resumen.apellidoPC=e.target.value)}),a.addEventListener("change",e=>{childDatos.fNacimiento=e.target.value,resumen.fNacimiento=e.target.value}),n.addEventListener("change",e=>{childDatos.edad=e.target.value,resumen.edad=e.target.value}),r.addEventListener("change",e=>{validarCurp(e.target.value)?(childDatos.curpC=e.target.value,resumen.curpC=e.target.value):mostrarAlertErrorCampo("El formato del CURP es invalido",e.target.parentElement)})}function guardarInfoDerecho(){const e=document.querySelector("#pApellidoD"),t=document.querySelector("#sApellidoD"),o=document.querySelector("#nombreDE"),a=document.querySelector("#domicilio"),n=document.querySelector("#alcmuni"),r=document.querySelector("#entidad"),c=document.querySelector("#cp"),l=document.querySelector("#tel_f"),d=document.querySelector("#tel_c"),i=document.querySelector("#correo"),u=document.querySelector("#ocupacion"),s=document.querySelector("#curpDE"),m=document.querySelector("#puesto"),p=document.querySelector("#sueldo"),g=document.querySelector("#nEmpleado"),v=document.querySelector("#adscripcion"),C=document.querySelector("#horaTrabajo"),y=document.querySelector("#extencionDE");e.addEventListener("change",e=>{validarTexto(e.target.value)?mostrarAlertErrorCampo("Apellido no valido",e.target.parentElement.parentElement.parentElement):(derechoHabienteDatos.apellidoP=e.target.value,resumen.apellidoP=e.target.value)}),t.addEventListener("change",e=>{validarTexto(e.target.value)?mostrarAlertErrorCampo("Apellido no valido",e.target.parentElement.parentElement.parentElement):(derechoHabienteDatos.apellidoM=e.target.value,resumen.apellidoM=e.target.value)}),o.addEventListener("change",e=>{derechoHabienteDatos.nombre=e.target.value,resumen.nombre=e.target.value}),a.addEventListener("change",e=>{derechoHabienteDatos.domicilio=e.target.value,resumen.domicilio=e.target.value}),n.addEventListener("change",e=>{derechoHabienteDatos.municipio=e.target.value,resumen.municipio=e.target.options[n.selectedIndex].innerText}),r.addEventListener("change",e=>{derechoHabienteDatos.entidadFederativa=e.target.value,resumen.entidadFederativa=e.target.options[r.selectedIndex].innerText}),c.addEventListener("change",e=>{derechoHabienteDatos.cp=e.target.value,resumen.cp=e.target.value}),l.addEventListener("change",e=>{derechoHabienteDatos.tel_F=e.target.value,resumen.tel_F=e.target.value}),d.addEventListener("change",e=>{derechoHabienteDatos.tel_C=e.target.value,resumen.tel_C=e.target.value}),i.addEventListener("change",e=>{derechoHabienteDatos.correo=e.target.value,resumen.correo=e.target.value}),u.addEventListener("change",e=>{derechoHabienteDatos.ocupacion=e.target.value,resumen.ocupacion=e.target.options[u.selectedIndex].innerText}),s.addEventListener("change",e=>{validarCurp(e.target.value)?(derechoHabienteDatos.curp=e.target.value,childDatos.curpD=e.target.value,resumen.curp=e.target.value):mostrarAlertErrorCampo("Formato de CURP no valido",e.target.parentElement)}),m.addEventListener("change",e=>{derechoHabienteDatos.puesto=e.target.value,resumen.puesto=e.target.value}),p.addEventListener("change",e=>{derechoHabienteDatos.sueldo=e.target.value,resumen.sueldo=e.target.value}),g.addEventListener("change",e=>{derechoHabienteDatos.nEmpleado=e.target.value,resumen.nEmpleado=e.target.value}),v.addEventListener("change",e=>{derechoHabienteDatos.adscripcion=e.target.value,resumen.adscripcion=e.target.options[v.selectedIndex].innerText}),C.addEventListener("change",e=>{derechoHabienteDatos.horarioTrabajo=e.target.value,resumen.horarioTrabajo=e.target.options[C.selectedIndex].innerText}),y.addEventListener("change",e=>{derechoHabienteDatos.extension=e.target.value,resumen.extension=e.target.value})}function guardarInfoConyugue(){const e=document.querySelector("#nombreCon"),t=document.querySelector("#pApellidoCon"),o=document.querySelector("#sApellidoCon"),a=document.querySelector("#tel_fCon"),n=document.querySelector("#lugarTrabCon"),r=document.querySelector("#domiTrabajoCon"),c=document.querySelector("#telTrabajo"),l=document.querySelector("#extCon");e.addEventListener("change",e=>{validarTexto(e.target.value)?mostrarAlertErrorCampo("El nombre no debe contener números",e.target.parentElement):(conyuDatos.nombreCO=e.target.value,resumen.nombreCO=e.target.value)}),o.addEventListener("change",e=>{validarTexto(e.target.value)?mostrarAlertErrorCampo("El apellido no debe contener números",e.target.parentElement):(conyuDatos.apellidoMCO=e.target.value,resumen.apellidoMCO=e.target.value)}),t.addEventListener("change",e=>{validarTexto(e.target.value)?mostrarAlertErrorCampo("El apellido no debe contener números",e.target.parentElement):(conyuDatos.apellidoPCO=e.target.value,resumen.apellidoPCO=e.target.value)}),a.addEventListener("change",e=>{conyuDatos.telefono=e.target.value,resumen.telefono=e.target.value}),c.addEventListener("change",e=>{conyuDatos.tel_trabajo=e.target.value,resumen.tel_trabajo=e.target.value}),n.addEventListener("change",e=>{conyuDatos.lugarTrabajo=e.target.value,resumen.lugarTrabajo=e.target.value}),l.addEventListener("change",e=>{conyuDatos.extensionCO=e.target.value,resumen.extensionCO=e.target.value}),r.addEventListener("change",e=>{conyuDatos.domicilioTrabajo=e.target.value,resumen.domicilioTrabajo=e.target.value})}function validarForm(){Object.values(childDatos).includes("")?alerta("Todos los campos son obligatorios","error"):mostrarResumen()}function mostrarResumen(){const e=document.querySelector(".form"),t=document.querySelector("#resumen"),o=document.querySelector(".modificar"),a=document.querySelector("#subirDatos"),n=document.querySelector(".fotos"),r=document.querySelector(".paginacion"),c=document.querySelector(".titulo");e.classList.add("hidden"),r.classList.add("hidden"),t.classList.remove("hidden"),t.classList.add("block"),n.classList.remove("hidden"),c.innerHTML=`Hola <span class='font-bold'>${derechoHabienteDatos.nombre}</span> verifica que tus datos sean correctos`,a.addEventListener("click",()=>{a.disabled=!0,subirDatos()}),mostrarInfo(),agregarValueFotos(),o.addEventListener("click",()=>{r.classList.remove("hidden"),e.classList.remove("hidden"),t.classList.add("hidden"),n.classList.add("hidden"),c.textContent="Formulario para la ficha de inscripción-reinscripción"})}function agregarValueFotos(){const e=document.querySelector("#bolteaImg"),t=document.querySelector("#curpImg");e.value=childDatos.boleta,t.value=derechoHabienteDatos.curp}function mostrarInfo(){const{adscripcion:e,apellidoM:t,apellidoMC:o,apellidoMCO:a,apellidoP:n,apellidoPC:r,apellidoPCO:c,boleta:l,cendi:d,correo:i,cp:u,curp:s,curpC:m,domicilio:p,domicilioTrabajo:g,edad:v,entidadFederativa:C,extension:y,extensionCO:b,fNacimiento:h,grupo:E,horarioTrabajo:S,lugarTrabajo:q,municipio:f,nEmpleado:L,nombre:x,nombreC:D,nombreCO:T,ocupacion:O,puesto:j,sueldo:R,tel_C:H,telefono:M,tel_F:P,tel_trabajo:A}=resumen;document.querySelector("#nombreC").textContent=D,document.querySelector("#apellidoPC").textContent=r,document.querySelector("#apellidoMC").textContent=o,document.querySelector("#boletaR").textContent=l,document.querySelector("#cendiR").textContent=d,document.querySelector("#grupoR").textContent=E,document.querySelector("#fNacimientoR").textContent=h,document.querySelector("#edadR").textContent=v,document.querySelector("#curpCR").textContent=m,document.querySelector("#nombreR").textContent=x,document.querySelector("#apellidoMR").textContent=t,document.querySelector("#apellidoPR").textContent=n,document.querySelector("#correoR").textContent=i,document.querySelector("#curpR").textContent=s,document.querySelector("#domicilioR").textContent=p,document.querySelector("#entidadFederativaR").textContent=C,document.querySelector("#municipioR").textContent=f,document.querySelector("#cpR").textContent=u,document.querySelector("#adscripcionR").textContent=e,document.querySelector("#nEmpleadoR").textContent=L,document.querySelector("#horarioTrabajoR").textContent=S,document.querySelector("#ocupacionR").textContent=O,document.querySelector("#puestoR").textContent=j,document.querySelector("#sueldoR").textContent="$"+R,document.querySelector("#tel_CR").textContent=H,document.querySelector("#tel_FR").textContent=P,document.querySelector("#extensionR").textContent=y,document.querySelector("#apellidoPConR").textContent=c,document.querySelector("#apellidoMConR").textContent=a,document.querySelector("#nombreConR").textContent=T,document.querySelector("#domicilioConR").textContent=p,document.querySelector("#entidadFederativaConR").textContent=C,document.querySelector("#municipioConR").textContent=f,document.querySelector("#cpConR").textContent=u,document.querySelector("#tel_FConR").textContent=M,document.querySelector("#tel_trabajoConR").textContent=A,document.querySelector("#extensionConR").textContent=b,document.querySelector("#lugarTrabajoConR").textContent=q,document.querySelector("#domicilioTrabajoConR").textContent=g}function LimpiarInfo(){document.querySelector("#limpiar").addEventListener("click",()=>{document.querySelector("#validar").classList.add("hidden"),Object.keys(childDatos).forEach(e=>{childDatos[e]=""}),Object.keys(derechoHabienteDatos).forEach(e=>{derechoHabienteDatos[e]=""}),Object.keys(conyuDatos).forEach(e=>{conyuDatos[e]=""})})}async function subirDatos(){const e=new FormData,t=Object.values(childDatos);Object.keys(childDatos).forEach((o,a)=>{e.append(o,t[a])});const o=Object.values(derechoHabienteDatos);if(Object.keys(derechoHabienteDatos).forEach((t,a)=>{e.append(t,o[a])}),Object.values(conyuDatos).includes(""))e.append("tieneCon","0");else{e.append("tieneCon","1");const t=Object.values(conyuDatos);Object.keys(conyuDatos).forEach((o,a)=>{e.append(o,t[a])})}try{const t="/usuarios/ApiCrear",o=await fetch(t,{method:"POST",body:e});"1"==(await o.json()).respuesta?(alerta("Se guardo correctamente la información","success","Al subir las fotos se te enviara un correo con la información de la inscripción"),mostrarModalFotos()):alerta("Ocurrio un error al guardar tu información","error")}catch(e){console.log(e)}}function mostrarModalFotos(){}function validarCurp(e){return/[A-Z]{1}[A,E,I,O,U,X]{1}[A-Z]{2}[0-9]{2}[0-1][0-9][0-3][0-9][M,H][A-Z]{2}[B,C,D,F,G,H,J,K,L,M,N,Ñ,P,Q,R,S,T,V,W,X,Y,Z]{3}[0-9,A-Z][0-9]/.test(e)}function validarTexto(e){return/[0-9]/.test(e)}function mostrarAlertErrorCampo(e,t){const o=document.createElement("P");o.textContent=e.toUpperCase(),o.classList.add("error"),o.classList.add("bg-red-700"),o.classList.add("text-white"),o.classList.add("px-3"),o.classList.add("py-2"),o.classList.add("border-l-red-900"),o.classList.add("border-l-4"),o.classList.add("font-semibold"),o.classList.add("text-sm"),o.classList.add("my-2"),t.appendChild(o),setTimeout(()=>{t.removeChild(o)},3e3)}
//# sourceMappingURL=bundle.js.map
